var aa=a=>Math.hypot(a[0],a[1],a[2]),e=(a,b,c)=>new Float32Array([a,b,c]),ba=(a,b)=>{a[0]=b[0];a[1]=b[1];a[2]=b[2]},f=(a,b,c,d)=>{a[0]=b;a[1]=c;a[2]=d},da=(a,b,c)=>{a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2]},ea=(a,b,c)=>{a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c},fa=(a,b,c,d)=>{a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;a[2]=b[2]+c[2]*d},ia=(a,b)=>Math.hypot(b[0]-a[0],b[1]-a[1],b[2]-a[2]),ja=(a,b)=>{const c=aa(b);0<c?ea(a,b,1/c):ba(a,b)},ka=(a,b,c,d)=>{a[0]=b[0]+d*(c[0]-b[0]);a[1]=b[1]+d*(c[1]-b[1]);a[2]=b[2]+
d*(c[2]-b[2])};var la=()=>{const a=new Float32Array(16);a[0]=1;a[5]=1;a[10]=1;a[15]=1;return a},ma=a=>{a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},h=(a,b,c)=>{const d=b[0],g=b[1],l=b[2],k=b[3],t=b[4],u=b[5],z=b[6],x=b[7],D=b[8],H=b[9],M=b[10],L=b[11],I=b[12],F=b[13],Q=b[14];b=b[15];let C=c[0],A=c[1],y=c[2],r=c[3];a[0]=C*d+A*t+y*D+r*I;a[1]=C*g+A*u+y*H+r*F;a[2]=C*l+A*z+y*M+r*Q;a[3]=C*k+A*x+y*L+r*b;C=c[4];A=c[5];y=c[6];r=c[7];a[4]=
C*d+A*t+y*D+r*I;a[5]=C*g+A*u+y*H+r*F;a[6]=C*l+A*z+y*M+r*Q;a[7]=C*k+A*x+y*L+r*b;C=c[8];A=c[9];y=c[10];r=c[11];a[8]=C*d+A*t+y*D+r*I;a[9]=C*g+A*u+y*H+r*F;a[10]=C*l+A*z+y*M+r*Q;a[11]=C*k+A*x+y*L+r*b;C=c[12];A=c[13];y=c[14];r=c[15];a[12]=C*d+A*t+y*D+r*I;a[13]=C*g+A*u+y*H+r*F;a[14]=C*l+A*z+y*M+r*Q;a[15]=C*k+A*x+y*L+r*b},m=(a,b,c)=>{const d=c[0],g=c[1];c=c[2];let l,k,t,u,z,x,D,H,M,L,I,F;b===a?(a[12]=b[0]*d+b[4]*g+b[8]*c+b[12],a[13]=b[1]*d+b[5]*g+b[9]*c+b[13],a[14]=b[2]*d+b[6]*g+b[10]*c+b[14],a[15]=b[3]*
d+b[7]*g+b[11]*c+b[15]):(l=b[0],k=b[1],t=b[2],u=b[3],z=b[4],x=b[5],D=b[6],H=b[7],M=b[8],L=b[9],I=b[10],F=b[11],a[0]=l,a[1]=k,a[2]=t,a[3]=u,a[4]=z,a[5]=x,a[6]=D,a[7]=H,a[8]=M,a[9]=L,a[10]=I,a[11]=F,a[12]=l*d+z*g+M*c+b[12],a[13]=k*d+x*g+L*c+b[13],a[14]=t*d+D*g+I*c+b[14],a[15]=u*d+H*g+F*c+b[15])},n=(a,b,c)=>{const d=c[0],g=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*g;a[5]=b[5]*g;a[6]=b[6]*g;a[7]=b[7]*g;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];
a[14]=b[14];a[15]=b[15]},na=(a,b,c)=>{const d=Math.sin(c);c=Math.cos(c);const g=b[4],l=b[5],k=b[6],t=b[7],u=b[8],z=b[9],x=b[10],D=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=g*c+u*d;a[5]=l*c+z*d;a[6]=k*c+x*d;a[7]=t*c+D*d;a[8]=u*c-g*d;a[9]=z*c-l*d;a[10]=x*c-k*d;a[11]=D*c-t*d},oa=(a,b,c)=>{const d=Math.sin(c);c=Math.cos(c);const g=b[0],l=b[1],k=b[2],t=b[3],u=b[8],z=b[9],x=b[10],D=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=
b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=g*c-u*d;a[1]=l*c-z*d;a[2]=k*c-x*d;a[3]=t*c-D*d;a[8]=g*d+u*c;a[9]=l*d+z*c;a[10]=k*d+x*c;a[11]=t*d+D*c},pa=(a,b,c)=>{const d=Math.sin(c);c=Math.cos(c);const g=b[0],l=b[1],k=b[2],t=b[3],u=b[4],z=b[5],x=b[6],D=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=g*c+u*d;a[1]=l*c+z*d;a[2]=k*c+x*d;a[3]=t*c+D*d;a[4]=u*c-g*d;a[5]=z*c-l*d;a[6]=x*c-k*d;a[7]=D*c-t*d};const sa=(a,b)=>{const c=[],d=e(-1,1,-1),g=e(1,1,-1),l=e(1,1,1),k=e(-1,1,1),t=e(-1,-1,-1),u=e(1,-1,-1),z=e(1,-1,1),x=e(-1,-1,1),D=new Float32Array(3),H=new Float32Array(3),M=new Float32Array(3),L=new Float32Array(3),I=new Float32Array(3),F=new Float32Array(3),Q=(C,A,y)=>{da(D,A,C);da(H,y,C);A=(r,ha,ca)=>{fa(r,C,D,ha/a);fa(r,r,H,ca/a);ha=aa(r);ha>b&&ea(r,r,b/ha)};for(y=0;y<a;y++)for(let r=0;r<a;r++)A(M,y,r),A(L,y+1,r),A(I,y+1,r+1),A(F,y,r+1),qa(c,M,L,I,F)};Q(d,g,k);Q(x,z,t);Q(g,d,u);Q(k,l,x);Q(d,k,
t);Q(l,g,z);return new Float32Array(c)},qa=(a,b,c,d,g)=>{a.push(...b);a.push(...c);a.push(...d);a.push(...b);a.push(...d);a.push(...g)};function ta(a,b){const c=a.g++;a.h[17*c]=b;return ma(a.l[c])}function ua(a){p.binfern(34962,a.j);p.bufataf(34962,a.h,a.usage)}
class va{constructor(a,b,c){this.usage=a;this.A=b.length/3;this.g=0;this.i=p.createVertexArray();p.binrayt(this.i);this.u=p.createBuffer();p.binfern(34962,this.u);p.bufataf(34962,b,35044);p.enarayr(0);p.verterb(0,3,5126,!1,12,0);this.h=new Uint32Array(17*c);this.j=p.createBuffer();p.binfern(34962,this.j);p.bufataf(34962,this.h,a);p.enarayr(1);p.verterb(1,4,5121,!0,68,0);p.vertexAttribDivisor(1,1);this.l=Array(c);for(a=0;a<
c;a++)this.l[a]=new Float32Array(this.h.buffer,4+68*a,16);p.enarayr(2);for(c=0;4>c;c++)a=2+c,p.enarayr(a),p.verterb(a,4,5126,!1,68,4+16*c),p.vertexAttribDivisor(a,1)}};const q=Array(256).fill(void 0).map(()=>({v:!1,K:0,m:1}));var wa=!1,ya=0,za=1;const Aa=()=>{wa=!1;q.forEach(a=>{a.v?(wa=!0,a.m=0,a.K++):(a.m++,a.K=0)});wa?(za=0,ya++):(za++,ya=0)},Ba=()=>{wa=!1;q.forEach(a=>a.v=!1);Aa()};document.addEventListener("keydown",a=>{a.preventDefault();a.stopPropagation();q[a.keyCode].v=!0});document.addEventListener("keyup",a=>{a.preventDefault();a.stopPropagation();q[a.keyCode].v=!1});window.addEventListener("blur",Ba);function Ca(a,b,c,d="#000"){v.fillStyle=d;v.fillText(a,b,c)}function w(a,b,c,d="#f0f0f0"){Ca(a,b+2,c+2);Ca(a,b,c,d)}function B(a,b=""){v.font=`bold ${b} ${a}px Comic Sans MS`}function Da(a){v.textAlign=a}function E(a,b,c,d=36){var g=b-d/2,l=c-8;v.fillStyle="rgba(0,0,0,0.5)";v.fillRect(g,l,d,36);v.strokeStyle="#f0f0f0";v.lineWidth=3;v.strokeRect(g,l,d,36);w(a,b,c)};const Ea=a=>{const b=p.createTexture();p.binured(3553,b);p.texImage2D(3553,0,6408,a,a,0,6408,5121,null);p.texerir(3553,10241,9729);p.texerir(3553,10242,33071);p.texerir(3553,10243,33071);const c=p.createTexture();p.binured(p.TEXTURE_2D,c);p.texImage2D(3553,0,36012,a,a,0,6402,5126,null);p.texerir(3553,10240,9728);p.texerir(3553,10241,9728);p.texerir(3553,10242,33071);p.texerir(3553,10243,33071);const d=p.createFramebuffer();p.bindFramebuffer(36160,
d);p.framebufferTexture2D(36160,36064,3553,b,0);p.framebufferTexture2D(36160,36096,3553,c,0);return{size:a,N:b,P:c,U:d}},Fa=a=>{p.bindFramebuffer(36160,a.U);p.viewport(0,0,a.size,a.size)};const Ga=()=>({source:new Float32Array(3),pitch:0,s:0,R:0,T:0}),Ha=(a,b,c,d)=>{ba(a.source,b);da(G,c,b);a.T=aa(G);a.s=Math.atan2(G[0],G[2]);a.pitch=Math.atan2(G[1],Math.hypot(G[0],G[2]));a.R=d};function Ia(a,b,c){a=Ja(35633,a);b=Ja(35632,b);const d=p.createProgram();p.attachShader(d,a);p.attachShader(d,b);c&&(p.bindAttribLocation(d,0,"b"),p.bindAttribLocation(d,1,"a"),p.bindAttribLocation(d,2,"d"));p.linkProgram(d);return d}function Ja(a,b){a=p.createShader(a);p.shaderSource(a,b);p.compileShader(a);return a}function Ka(){p.clearColor(0,0,0,1);p.clearDepth(1);p.enable(2929);p.depthFunc(515);p.enable(3042);p.blendFunc(770,771);p.clear(16640)}
function La(a,b,c){var d=Ma;const g=1/Math.tan(a.R/2),l=1/-999.9;d[0]=g/(b/c);d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=g;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=-1000.1*l;d[11]=1;d[12]=0;d[13]=0;d[14]=200*l;d[15]=0;na(Na,ma(Na),a.pitch);oa(Oa,ma(Oa),-a.s);h(Qa,Na,Oa);da(Ra,Sa,a.source);m(Qa,Qa,Ra)};const Ta=document.querySelectorAll("canvas"),Ua=Ta[0],Va=Ta[1],v=Va.getContext("2d"),Sa=new Float32Array(3),Wa=e(0,0,1),G=new Float32Array(3),J=Ga(),Xa=Ga(),Ra=new Float32Array(3),Ma=la(),Qa=la(),Na=la(),Oa=la();la();const Ya=la(),p=Ua.getContext("webgl2",{alpha:!1});var ab=p;for(const a in ab){const b=a.substr(0,3)+a.substr(-3)+(a[a.length-8]||"_");b in ab||(ab[b]=ab[a])}
const bb=Ia("#version 300 es\nprecision highp float;in vec4 b;in mat4 d;uniform mat4 l;uniform mat4 n;void main(){gl_Position=l*n*d*b;}","#version 300 es\nprecision highp float;out vec4 e;void main(){e=vec4(1,1,1,1);}",!0),cb=p.getUniformLocation(bb,"n"),db=p.getUniformLocation(bb,"l"),eb=Ia("#version 300 es\nprecision highp float;in vec4 b;in vec4 a;in mat4 d;uniform mat4 l;uniform mat4 n;uniform mat4 m;out vec4 q;out vec4 o;out float p;out vec4 r;void main(){q=d*b;o=a;p=-(n*q).z;r=m*q;gl_Position=l*n*q;}",
"#version 300 es\nprecision highp float;uniform sampler2D g;uniform sampler2D h;uniform vec3 k[16];uniform vec3 j[16];in vec4 o;in float p;in vec4 q;in vec4 r;out vec4 e;void main(){if(o.r>0.99||o.g>0.99||o.b>0.99){e=o;return;}if(o.r<0.1&&o.g<0.1&&o.b<0.1){vec3 v=normalize(normalize((-q).xyz)-.5);float w,cody_a=w=0.;for(int cody_i=0;cody_i<15;cody_i+=1){v=abs(v)/dot(v,v)-.49;cody_a+=abs(length(v)-w);w=length(v);}cody_a*=cody_a*cody_a;e.rgb=.5*clamp((pow(vec3(cody_a/2e5,cody_a/2e5,cody_a/1e5),vec3(.9))),0.,2.)+vec3(0.03,0.0,0.12);e.a=1.0;return;}vec3 S=normalize(cross(dFdx(q.xyz),dFdy(q.xyz)));vec3 E=vec3(-.25,-.75,.2);vec3 N=E-2.0*dot(E,S)*S;vec3 t=normalize(vec3(0,0,1));float P=20.0;vec3 K=r.xyz/r.w;float H=0.0;float u=0.0;for(float M=-3.0;M<=3.0;M+=1.0){for(float L=-3.0;L<=3.0;L+=1.0){if(((texture(h,K.xy+vec2(L,M)/2048.0)).r)<=(K.z*0.99999965)){u+=1.0;}H+=1.0;}}float O=(K.x>=0.0&&K.x<=1.0&&K.y>=0.0&&K.y<=1.0)?1.0-0.5*u/H:1.0;vec3 R=mix(vec3(0.0,0.1,0.4),o.rgb,(clamp((0.5+0.5*(max(dot(S,E),0.0))*O)+O*(0.0),0.0,1.0)));for(int light=0;light<16;light++){vec3 G=q.xyz-k[light];float C=length(G);R.rgb+=0.2*max(0.0,dot(normalize(G),S))*(clamp((2.0)/(C*C),0.0,1.0))*j[light];}e.rgb=R.rgb;e.a=1.0;}",
!0),fb=p.getUniformLocation(eb,"n"),gb=p.getUniformLocation(eb,"l"),hb=p.getUniformLocation(eb,"m"),ib=p.getUniformLocation(eb,"h"),jb=p.getUniformLocation(eb,"j"),kb=p.getUniformLocation(eb,"k"),lb=new Float32Array(48),mb=new Float32Array(48);let nb=0;
const K=[],ob=Ea(2048),pb=Ea(2048),qb=Ea(512),rb=Ea(512),sb=Ia("#version 300 es\nprecision highp float;in vec2 b;in vec2 c;out vec2 s;void main(){gl_Position=vec4(b,0,1);s=c;}","#version 300 es\nprecision highp float;uniform sampler2D g;uniform int i;in vec2 s;out vec4 e;float w=0.99;float x[11]=float[11](0.01,0.02,0.04,0.08,0.16,0.38,0.16,0.08,0.04,0.02,0.01);void main(){if(i==0){vec4 t=texture(g,s);if(t.r>w||t.g>w||t.b>w){e=t;}else{discard;}}else if(i==1||i==3){vec4 u=vec4(0);float v=0.0;for(int xi=-5;xi<=5;xi++){vec4 t=texture(g,s+vec2(float(xi)/512.0,0.0));u.rgb+=x[xi+5]*t.rgb*t.a;v+=x[xi+5]*t.a;}if(v==0.0){e=vec4(0,0,0,1);}else{u.rgb/=v;u.a=v;e=u;}}else{vec4 u=vec4(0);float v=0.0;for(int yi=-5;yi<=5;yi++){vec4 t=texture(g,s+vec2(0.0,float(yi)/512.0));u.rgb+=x[yi+5]*t.rgb*t.a;v+=x[yi+5]*t.a;}if(v==0.0){e=vec4(0,0,0,1);}else{u.rgb/=v;u.a=v;e=u;}}}"),tb=
p.getUniformLocation(sb,"g"),ub=p.getUniformLocation(sb,"i"),vb=Ia("#version 300 es\nprecision highp float;in vec2 b;in vec2 c;out vec2 s;void main(){gl_Position=vec4(b,0,1);s=c;}","#version 300 es\nprecision highp float;uniform sampler2D g;uniform sampler2D f;in vec2 s;out vec4 e;void main(){vec4 t=texture(f,s);e=vec4((texture(g,s)).rgb+2.0*t.a*t.rgb,1);}"),wb=p.getAttribLocation(vb,"b"),xb=p.getAttribLocation(vb,"c"),yb=p.getUniformLocation(vb,"g"),zb=p.getUniformLocation(vb,"h"),Ab=p.getUniformLocation(vb,
"f"),Bb=p.createVertexArray();p.binrayt(Bb);const Cb=p.createBuffer();p.binfern(34962,Cb);p.bufataf(34962,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),35044);p.enarayr(wb);p.verterb(wb,2,5126,!1,0,0);const Db=p.createBuffer();p.binfern(34962,Db);p.bufataf(34962,new Float32Array([0,0,1,0,0,1,1,0,1,1,0,1]),35044);p.enarayr(xb);p.verterb(xb,2,5126,!1,0,0);let N=0,O=0,P=0;window.addEventListener("resize",Eb,!1);Eb();
function Eb(){var a=Math.min(window.innerWidth/1920,(window.innerHeight-76)/1080);const b=1920*a;a*=1080;const c=(window.innerWidth-b)/2;Ua&&(Ua.width=1920,Ua.height=1080,Ua.style.left=Math.floor(c)+"px",Ua.style.top="76px",Ua.style.width=Math.floor(b)+"px",Ua.style.height=Math.floor(a)+"px");Va&&(Va.width=1920,Va.height=1080,Va.style.left=Math.floor(c)+"px",Va.style.top="76px",Va.style.width=Math.floor(b)+"px",Va.style.height=Math.floor(a)+"px")}
function Fb(a){a*=.001;P=Math.min(a-N,1/30);N=a;S!==Gb||Hb||(O+=P);Aa();v.clearRect(0,0,1920,1080);v.textBaseline="top";K.forEach(c=>{var d;if(d=35048===c.usage)c.g=0,d=void 0;return d});Ib();K.forEach(c=>35048===c.usage&&ua(c));Fa(ob);Ka();La(Xa,ob.size,ob.size);p.useProgram(bb);p.uni4fva(db,!1,Ma);p.uni4fva(cb,!1,Qa);Jb();ma(Ya);m(Ya,Ya,e(.5,.5,.5));n(Ya,Ya,e(.5,.5,.5));h(Ya,Ya,Ma);h(Ya,Ya,Qa);Fa(pb);Ka();La(J,1920,1080);p.useProgram(eb);p.uni4fva(gb,!1,Ma);p.uni4fva(fb,
!1,Qa);p.uni4fva(hb,!1,Ya);p.uniform3fv(jb,lb);p.uniform3fv(kb,mb);p.acturee(33984);p.binured(3553,ob.P);p.uniform1i(ib,0);Jb();a=pb;let b=qb;p.useProgram(sb);for(let c=0;5>c;c++)Fa(b),Ka(),p.binrayt(Bb),p.acturee(33984),p.binured(3553,a.N),p.uniform1i(tb,0),p.uniform1i(ub,c),p.drawArrays(4,0,6),0===c%2?(a=qb,b=rb):(a=rb,b=qb);p.bindFramebuffer(36160,null);p.viewport(0,0,1920,1080);p.useProgram(vb);p.clearColor(0,0,0,1);p.clear(16640);p.binrayt(Bb);p.acturee(33984);
p.binured(3553,pb.N);p.uniform1i(yb,0);p.acturee(33985);p.binured(3553,pb.P);p.uniform1i(zb,1);p.acturee(33986);p.binured(3553,qb.N);p.uniform1i(Ab,2);p.drawArrays(4,0,6);requestAnimationFrame(Fb)}requestAnimationFrame(Fb);function Jb(){K.forEach(a=>{p.binrayt(a.i);35048===a.usage&&(p.binfern(34962,a.j),p.bufferSubData(34962,0,a.h,0,17*a.g));p.drawArraysInstanced(4,0,a.A,a.g)})}
function Kb(a,b){lb[3*nb]=b[0];lb[3*nb+1]=b[1];lb[3*nb+2]=b[2];mb[3*nb]=a[0];mb[3*nb+1]=a[1];mb[3*nb+2]=a[2];nb++};function Nb(){var a=T;a.h[1]=12;a.D=0;a.I=null;a===T&&Ob(...[.6,0,130,.01,.02,,,.4,5,,,,,,,,,.9])}function Pb(a){return 0>=T.l?1E3:ia(T.g,a.g)}function Qb(a){if(0===a.u.length)return null;const b=a.u[a.H];.1>ia(a.g,b)&&(a.H=(a.H+1)%a.u.length);return b}function U(a,b){b=ta(K[3],b);h(b,b,a.j);return b}
class Rb{constructor(a,b,c){this.g=e(a||0,b||0,c||0);this.h=new Float32Array(3);this.j=la();this.l=100;this.s=0;this.F=!1;this.D=0;this.I=null;this.M=this.S=0;this.u=[];this.H=0;this.J=!0}C(){}A(){}};class Sb extends Rb{constructor(a,b,c){super(a,b,c);this.o=60;this.i=15;this.B=4279422123;this.M=.01}C(){const a=Qb(this),b=Pb(this);1.5>b?T.g[1]>this.g[1]?(this.l=0,T.g[1]=this.g[1]+2,Nb(),Tb(this.g,this.B,15)):(T.l=0,T.J=!1,Ub(),Tb(T.g,this.B)):b<this.i?(da(G,T.g,this.g),G[1]=0,ja(G,G),fa(this.h,this.h,G,P*this.o)):a&&(da(G,a,this.g),ja(G,G),fa(this.h,this.h,G,P*this.o));Vb(this)}A(){var a=U(this,this.B);m(a,a,e(0,.8,0));n(a,a,e(.8,.8,.7));a=U(this,4281545523);m(a,a,e(-.25,.9,.7));pa(a,a,-1);n(a,
a,e(.2,.1,.025));a=U(this,4281545523);m(a,a,e(.25,.9,.7));pa(a,a,1);n(a,a,e(.2,.1,.025))}};class Wb extends Rb{C(){const a=Pb(this);1>a?(this.l=0,Xb++,Yb++,Zb=O,Ob(...[.7,0,1E3*(1+1/12)**Yb,,.05,,1,1.5,,,300,.1,,,,,,.5,.05])):3>a&&(this.g[0]=.9*this.g[0]+.1*T.g[0],this.g[1]=.9*this.g[1]+.1*T.g[1],this.g[2]=.9*this.g[2]+.1*T.g[2])}A(){const a=N%1*2*Math.PI,b=1.5+.2*Math.sin(a),c=U(this,4282710264);m(c,c,e(0,b,0));oa(c,c,a);n(c,c,e(.5,.5,.1))}};class $b extends Rb{constructor(a,b,c){super(a,b,c);this.i=!1}C(){const a=Pb(this);Xb===ac&&2>a&&!this.i&&(bc(cc),dc[ec]=dc[ec]?Math.min(dc[ec],O):O,localStorage["callisto-times"]=JSON.stringify(dc),localStorage[`OS13kTrophy,${"\ud83d\udc68\u200d\ud83d\ude80"},${"Captain Callisto"},${`Level ${ec}`}`]=`${O.toFixed(1)} sec`,fc(),gc(hc),S=ic,this.i=!0)}A(){const a=N%1*2*Math.PI,b=4.7+.1*Math.sin(a);var c=U(this,4291607466);m(c,c,e(0,2.5,0));n(c,c,e(.2,2.5,.2));c=U(this,4291607466);n(c,c,e(.5,.5,.5));
c=U(this,4279313117);m(c,c,e(0,b,0));oa(c,c,a);n(c,c,e(.5,.5,.5))}};class jc extends Rb{constructor(a,b,c,d){super(a,b,c);this.amount=d||30}C(){const a=Pb(this);1>a?(T.o+=this.amount,this.amount=this.l=0,Ob(...[.5,0,328,.04,.1,.35,,.97,,.5,9,.01,.06,,12,.1,,.74,.08])):4>a&&(this.g[0]=.9*this.g[0]+.1*T.g[0],this.g[1]=.9*this.g[1]+.1*T.g[1],this.g[2]=.9*this.g[2]+.1*T.g[2])}A(){const a=N%1*2*Math.PI,b=1.5+.2*Math.sin(a);var c=U(this,4289374368);m(c,c,e(-.24,b,0));oa(c,c,a);n(c,c,e(.3,.64,.3));c=U(this,4289374368);m(c,c,e(.24,b,0));oa(c,c,a);n(c,c,e(.3,.64,.3))}};class kc extends Rb{constructor(){super(void 0,void 0,void 0);this.M=.01;this.o=100;this.i=!1}A(){var a=0;let b=1.2;var c=0;let d=-1.2;var g=0;let l=0;this.D!==O||S===ic?(b=-.5,d=.5):this.F&&(l=a=.07*Math.hypot(this.h[0],this.h[2])*Math.sin(O%.8/.8*2*Math.PI),c=g=-a,b=1.2,d=-1.2);var k=U(this,4279352304);m(k,k,e(0,1.8,0));n(k,k,e(.38,.38,.38));k=U(this,4293980400);m(k,k,e(0,1.8,-.08));n(k,k,e(.45,.5,.38));k=U(this,4293980400);m(k,k,e(0,1.05,0));n(k,k,e(.3,.47,.27));k=U(this,4289374368);m(k,k,e(-.12,
1.2,-.35));n(k,k,e(.15,.32,.15));k=U(this,4289374368);m(k,k,e(.12,1.2,-.35));n(k,k,e(.15,.32,.15));this.i&&(k=U(this,4278231295),m(k,k,e(0,.9,-.35)),n(k,k,e(.2,.2,.2)),Kb(e(this.g[0],this.g[1]+1,this.g[2]),e(1,.75,0)));k=U(this,4293980400);m(k,k,e(-.3,1.4,0));na(k,k,a);pa(k,k,b);m(k,k,e(-.4,0,0));n(k,k,e(.4,.16,.16));a=U(this,4293980400);m(a,a,e(.3,1.4,0));na(a,a,c);pa(a,a,d);m(a,a,e(.4,0,0));n(a,a,e(.4,.16,.16));c=U(this,4293980400);m(c,c,e(0,1.1,0));na(c,c,g);m(c,c,e(-.21,-.6,0));n(c,c,e(.18,.6,
.18));g=U(this,4293980400);m(g,g,e(0,1.1,0));na(g,g,l);m(g,g,e(.21,-.6,0));n(g,g,e(.18,.6,.18))}};class lc extends Rb{constructor(){super(16,5,16);this.i=0}C(){this.s=Math.atan2(T.g[0]-this.g[0],T.g[2]-this.g[2]);this.g[1]=T.g[1]+6+Math.sin(2*N);this.h[1]=0;if(S===Gb&&O>this.i&&0<T.l){const a=new mc;a.B=nc;a.i=4282401023;a.L=10;a.o=e(1,0,0);a.size=.5;ba(a.g,this.g);a.g[1]+=3;const b=e(T.g[0],T.g[1]+1,T.g[2]);da(a.h,b,a.g);ja(a.h,a.h);ea(a.h,a.h,40);V.push(a);this.i=O+5;oc()}}A(){ma(this.j);m(this.j,this.j,this.g);oa(this.j,this.j,this.s);var a=U(this,4279422123);n(a,a,e(3,7,3));a=U(this,4289130736);
m(a,a,e(0,3,1.2));n(a,a,e(2,2,2));a=U(this,4281545523+204*Math.min((5-(this.i-O))/4.5,1));m(a,a,e(0,3,3));n(a,a,e(.5,1.2,.3));for(a=0;10>a;a++){const b=U(this,4279422123);oa(b,b,a/10*Math.PI*2);na(b,b,.5+.4*Math.sin(4*N+a));m(b,b,e(0,-2,4));n(b,b,e(.5,.5,4))}}};const pc=[4294914096,4281401088,4281348351,4294967088,4294914303,4281401343];class qc extends Rb{constructor(){var a=2+2*Math.random(),b=4+20*Math.random(),c=2+2*Math.random();super((.5>Math.random()?-1:1)*(10+40*Math.random()),600,(.5>Math.random()?-1:1)*(10+40*Math.random()));this.i=pc[6*Math.random()|0];this.o=e(a,b,c)}C(){fa(this.g,this.g,this.h,P);this.l-=20*P}A(){const a=ta(K[2],this.i);h(a,a,this.j);n(a,a,this.o)}};var nc=2;class mc extends Rb{constructor(){super(void 0,void 0,void 0);this.size=.2;this.L=100;this.i=4293980400;this.O=new Float32Array(3);this.o=null;this.B=0}C(){fa(this.h,this.h,this.O,P);fa(this.g,this.g,this.h,P);this.l-=P*this.L}A(){const a=this.l/100*this.size,b=U(this,this.i);n(b,b,e(a,a,a));this.o&&Kb(this.g,this.o)}};class rc extends Rb{constructor(){super(void 0,void 0,void 0);this.i=e(1,1,1);this.u=[];this.H=0}C(){const a=Qb(this);a&&(da(this.h,a,this.g),ja(this.h,this.h),ea(this.h,this.h,6),fa(this.g,this.g,this.h,P))}A(){if(0<this.u.length){var a=ta(K[2],4282710264);h(a,a,this.j);n(a,a,this.i);a=ta(K[2],4281545523);h(a,a,this.j);oa(a,a,Math.PI/4);n(a,a,e(2.5,.31,.32));a=ta(K[2],4281545523);h(a,a,this.j);oa(a,a,Math.PI/4);m(a,a,e(0,0,-1.2));n(a,a,e(1.35,.31,.32));a=ta(K[2],4281545523);h(a,a,this.j);oa(a,a,
Math.PI/4);m(a,a,e(0,0,1.2));n(a,a,e(1.35,.31,.32));a=ta(K[2],4281545523);h(a,a,this.j);m(a,a,e(0,0,-1.82));n(a,a,e(2.04,.32,.2));a=ta(K[2],4281545523);h(a,a,this.j);m(a,a,e(0,0,1.82));n(a,a,e(2.04,.32,.2));a=ta(K[2],4281545523);h(a,a,this.j);m(a,a,e(-1.82,0,0));n(a,a,e(.2,.32,2.04));a=ta(K[2],4281545523);h(a,a,this.j);m(a,a,e(1.82,0,0));n(a,a,e(.2,.32,2.04))}else a=ta(K[2],4291607466),h(a,a,this.j),n(a,a,this.i)}};class sc extends Rb{constructor(a,b,c,d,g){super(a,b,c);this.s=d;this.i=g}C(){this.g[1]+=.5*P*Math.sin(2*N);this.h[1]=0;if(S===Gb&&O>this.i&&0<T.l){const d=new mc;d.B=nc;d.i=4282401023;d.L=10;d.o=e(1,0,0);d.size=.5;ba(d.g,this.g);d.g[1]+=.75;var a=d.h,b=this.s,c=Sa;const g=[],l=[];g[0]=Wa[0]-c[0];g[1]=Wa[1]-c[1];g[2]=Wa[2]-c[2];l[0]=g[2]*Math.sin(b)+g[0]*Math.cos(b);l[1]=g[1];l[2]=g[2]*Math.cos(b)-g[0]*Math.sin(b);a[0]=l[0]+c[0];a[1]=l[1]+c[1];a[2]=l[2]+c[2];ea(d.h,d.h,20);V.push(d);this.i=O+5;oc()}}A(){ma(this.j);
m(this.j,this.j,this.g);oa(this.j,this.j,this.s);var a=U(this,4279422123);m(a,a,e(0,.8,0));n(a,a,e(.5,.5,.5));a=U(this,4291607466);m(a,a,e(0,.4,0));n(a,a,e(.5,.5,.5));a=U(this,4278231295);m(a,a,e(0,-.2,0));n(a,a,e(.3,.3,.3));a=U(this,4281545523);m(a,a,e(-.25,1,.4));pa(a,a,-1);n(a,a,e(.15,.1,.1));a=U(this,4281545523);m(a,a,e(.25,1,.4));pa(a,a,1);n(a,a,e(.15,.1,.1))}};class tc extends Rb{A(){var a=U(this,4293980400);n(a,a,e(5,1,1.3));a=U(this,4279352304);m(a,a,e(1.5,.5,0));n(a,a,e(2,.6,.8));a=U(this,4293980400);m(a,a,e(0,0,2));oa(a,a,.5);n(a,a,e(3,.3,1));a=U(this,4293980400);m(a,a,e(0,0,-2));oa(a,a,-.5);n(a,a,e(3,.3,1));a=U(this,4289374368);m(a,a,e(-3,.3,.7));n(a,a,e(3,.5,.5));a=U(this,4289374368);m(a,a,e(-3,.3,-.7));n(a,a,e(3,.5,.5))}};const uc=(a=1,b,c=220,d=0,g=0,l=.1,k=0,t=1,u=0,z=0,x=0,D=0,H=0,M=0,L=0,I=0,F=0,Q=1,C=0,A=0)=>{b=2*Math.PI;let y=u*=500*b/44100/44100,r=c*=b/44100,ha=[],ca=0,Za=0,R=0,ra=1,$a=0,Lb=0,xa=0,Mb,Pa;d=44100*d+9;C*=44100;g*=44100;l*=44100;F*=44100;z*=500*b/44100**3;L*=b/44100;x*=b/44100;D*=44100;H=44100*H|0;for(Pa=d+C+g+l+F|0;R<Pa;ha[R++]=xa)++Lb%(100*I|0)||(xa=k?1<k?2<k?3<k?Math.sin((ca%b)**3):Math.max(Math.min(Math.tan(ca),1),-1):1-(2*ca/b%2+2)%2:1-4*Math.abs(Math.round(ca/b)-ca/b):Math.sin(ca),xa=(H?1-
A+A*Math.sin(b*R/H):1)*(0<xa?1:-1)*Math.abs(xa)**t*a*.3*(R<d?R/d:R<d+C?1-(R-d)/C*(1-Q):R<d+C+g?Q:R<Pa-F?(Pa-R-F)/l*Q:0),xa=F?xa/2+(F>R?0:(R<Pa-F?1:(Pa-R)/F)*ha[R-F|0]/2):xa),Mb=(c+=u+=z)*Math.cos(L*Za++),ca+=Mb-Mb*M*(1-1E9*(Math.sin(R)+1)%2),ra&&++ra>D&&(c+=x,r+=x,ra=0),!H||++$a%H||(c=r,u=y,ra=ra||1);return ha},xc=(...a)=>{const b=vc.createBufferSource(),c=vc.createBuffer(a.length,a[0].length,44100);a.map((d,g)=>c.getChannelData(g).set(d));b.buffer=c;b.connect(vc.destination);b.connect(wc);b.start();
return b},Ob=(...a)=>{xc(uc(...a))},vc=new AudioContext,yc=vc.sampleRate,zc=vc.createBuffer(2,yc,yc),Ac=zc.getChannelData(0),Bc=zc.getChannelData(1);for(let a=0;a<yc;a++)Ac[a]=.5*(2*Math.random()-1)*Math.pow(1-a/yc,1.5),Bc[a]=.5*(2*Math.random()-1)*Math.pow(1-a/yc,1.5);const Cc=vc.createConvolver();Cc.buffer=zc;Cc.connect(vc.destination);const wc=Cc;const Dc=(a,b,c,d=125)=>{let g,l,k,t,u,z,x,D,H,M,L,I,F,Q=0,C,A=[];const y=[],r=[];let ha=0,ca=0,Za=1;const R={},ra=44100/d*60>>2;for(;Za;ha++)A=[Za=D=I=0],c.map(($a,Lb)=>{x=b[$a][ha]||[0,0,0];Za|=b[$a][ha]?1:0;C=I+(b[$a][0].length-2-(D?0:1))*ra;F=Lb==c.length-1;l=2;for(t=I;l<x.length+F;D=++l){u=x[l];H=l==x.length+F-1&&F||(M!=(x[0]||0)?1:0)|u|0;for(k=0;k<ra&&D;)z=(1-L)*A[Q++]/2||0,y[t]=(y[t]||0)-z*ca+z,r[t]=(r[t++]||0)+z*ca+z,k++>ra-99&&H&&(L+=(1>L?1:0)/99);u&&(L=u%1,ca=x[1]||0,u|=0)&&(A=R[[M=x[Q=
0]||0,u]]=R[[M,u]]||(g=[...a[M]],g[2]*=2**((u-12)/12),0<u?uc(...g):[]))}I=C});return[y,r]};const oc=()=>{Ob(...[.2,0,20,.02,.1,,4,.87,,.9,,,,,,,,.83,.02,.28])},Ec=()=>{Ob(...[.5,0,80,.02,.04,.02,1,.3,56,,,,,.1,7.5,,,.39])},Fc=uc(...[.05,0,900,.2,3,0,4,0,,,,,,4,,.1]);let Gc;const fc=()=>{Gc&&(Gc.stop(),Gc=null)};const Hc=[[[,0,240,.01,.09,.2,1,2,,,,,,,,,,.5],[.1,0,120,,.07,.07,1,0,,,.5,.01],[.8,0,240,.01,.4,.2,1,2,,,,,,,,,,.5]],[[[,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,24,24,20,20,17,17,17,24,22,22,19,19,15,15,15,22,24,24,20,20,8,13,8,8,22,22,22,15,15,19,15,22,24,24,20,20,17,17,17,24,22,22,19,19,15,15,15,22,24,24,20,20,8,13,8,8,22,22,22,15,15,19,15,22],[1,,24,17,20,15,17,8,5,24,22,15,19,10,15,7,3,22,24,19,20,13,8,8,8,5,22,10,3,15,3,19,15,22,24,17,20,12,17,8,5,24,22,15,19,
10,15,7,3,22,24,19,20,13,8,8,8,5,22,10,3,15,3,19,15,22]],[[2,,20,,,17,,,20,,19,,17,,15,,12,,17,,,,12,,,,15,,,,,,,,24,,,17,,,24,,22,,20,,19,,15,,17,,,,20,,,,19,,,,22,,,,],[1,,24,24,20,20,17,17,17,24,22,22,19,19,15,15,15,22,24,24,20,20,8,13,8,8,22,22,22,15,15,19,15,22,24,24,20,20,17,17,17,24,22,22,19,19,15,15,15,22,24,24,20,20,8,13,8,8,22,22,22,15,15,19,15,22],[1,,24,17,20,15,17,8,5,24,22,15,19,10,15,7,3,22,24,19,20,13,8,8,8,5,22,10,3,15,3,19,15,22,24,17,20,12,17,8,5,24,22,15,19,10,15,7,3,22,24,19,
20,13,8,8,8,5,22,10,3,15,3,19,15,22]],[[2,,17,,,,,,,,15,,,,10,,,,17,,,,,,20,,19,,,,22,,,,24,,,,17,,,,24,,22,,20,,19,,17,,,,,,19,17,19,,,,,,,,],[1,,24,24,20,20,17,17,17,24,22,22,19,19,15,15,15,22,24,24,20,20,8,13,8,8,22,22,22,15,15,19,15,22,24,24,20,20,17,17,17,24,22,22,19,19,15,15,15,22,24,24,20,20,8,13,8,8,22,22,22,15,15,19,15,22],[1,,24,17,20,15,17,8,5,24,22,15,19,10,15,7,3,22,24,19,20,13,8,8,8,5,22,10,3,15,3,19,15,22,24,17,20,12,17,8,5,24,22,15,19,10,15,7,3,22,24,19,20,13,8,8,8,5,22,10,3,15,3,
19,15,22]],[[2,,24,,20,,17,,,24,22,,19,,15,,,22,24,,22,,,,,,22,,,15,,19,15,22,24,,20,,17,,,24,22,,19,,15,,,22,24,,20,,,,,,22,,,15,,19,15,22],[1,,24,24,20,20,17,17,17,24,22,22,19,19,15,15,15,22,24,24,20,20,8,13,8,8,22,22,22,15,15,19,15,22,24,24,20,20,17,17,17,24,22,22,19,19,15,15,15,22,24,24,20,20,8,13,8,8,22,22,22,15,15,19,15,22],[1,,24,17,20,15,17,8,5,24,22,15,19,10,15,7,3,22,24,19,20,13,8,8,8,5,22,10,3,15,3,19,15,22,24,17,20,12,17,8,5,24,22,15,19,10,15,7,3,22,24,19,20,13,8,8,8,5,22,10,3,15,3,19,
15,22]]],[0,1,2,3],70],Ic=[[[.9,0,240,.01,.09,.2,1,2,,,,,,,,,,.5],[.2,0,120,,.07,.07,1,0,,,.5,.01]],[[[,,27,,26,,25,,24,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,,15,,14,,13,,12,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[1,,15,15,14,14,13,13,12,12,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]]],[0]],cc=[[[.9,0,240,.01,.09,.2,1,2,,,,,,,,,,.5],[.2,0,120,,.07,.07,1,0,,,.5,.01],[.9,0,240,.01,.4,.2,1,2,,,,,,,,,,.5]],[[[,,1,1,1,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,],[,,5,5,5,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[,,8,8,8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[2,,,,,,8,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[2,,,,,,12,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,],[2,,,,,,15,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,]]],[0]];let Jc=null;const bc=(a,b)=>{a=Dc(...a);a=xc(...a);b&&(Jc&&(Jc.stop(),Jc=null),a.loop=!0,Jc=a)};const Kc=[,[["OUR HERO, CAPTAIN CALLISTO, BLASTS THROUGH SPACE","SEEKING ADVENTURE"]],[["APPROACHING THE ZETA AIR FORTRESS","BEWARE: SENSORS SHOW SIGNS OF LIFE"]],[,["COLLECT ALL TREASURE AND","REACH THE TRANSPORTER TO PROCEED"],["THE PATH IS TREACHEROUS","PROCEED WITH CAUTION"],["THERE'S MORE THAN ONE WAY TO SKIN A WOMP RAT",""],["MORE ALIEN ACTIVITY THAN EXPECTED","PROCEED WITH CAUTION"],["WE ARE DEEP INTO ALIEN TERRITORY","HIGH ALERT"],["EVIDENCE OF COMPLEX CIVILIZATION","DO NOT UNDERESTIMATE THE ENEMY"],
["ALIEN DEFENSES ARRIVED","WATCH OUT FOR MISSILES"],["CLIMB THE GREAT PYRAMID","TREASURE AWAITS"],["THE GREAT SPIRES OF KODOS","WE MUST BE NEAR!"],["THE INNER SANCTUM!  THE GREAT KANG!","YOU ARE DOOMED!"]],[["OH NO!","TRY AGAIN!"]]],Lc=()=>({G:()=>{S=Gb;O=0;gc(null)}}),Oc={G:()=>{S=Mc;Nc()}},hc={G:()=>{S=Mc;ec+=1;Nc()}},Qc={G:()=>{0===S&&(vc.resume(),localStorage["music-off"]||bc(Hc,!0));++S>Pc&&(ec=1,Nc())}},Rc={G:()=>{}},Sc={G:()=>{}};let Tc=0,Hb=Qc,Uc=null,W=0;
function gc(a){Uc=Hb;Tc=N;Hb=a;W=0}function Nc(){Vc();gc(Lc())};const Xc=[()=>{V.push(new tc)},()=>{X(4,0,0,32,4,4);Y(14,5,2,4,0,3);X(28,0,4,32,4,8);Z(30,3,10,30,8,10);X(0,4,12,32,8,16);Y(14,9,14,4,0,3);X(0,4,16,4,8,20);Z(2,12,22,2,7,22);X(0,8,24,16,12,28);X(16,8,24,32,10,28);const a=new Sb;a.i=0;f(a.g,18,10,26);a.u=[e(17,10,26),e(27,10,26)];V.push(a);V.push(new $b(30,10,26));f(T.g,6,4,2)},()=>{X(12,3.5,0,20,4.5,8);X(0,4,8,32,5,12);X(8,4.5,12,12,5.5,16);X(0,5,16,32,6,20);X(20,5.5,20,24,6.5,24);X(0,6,24,32,7,28);Y(2,6,10,28,0,2);Y(2,7,18,28,0,2);Y(10,8,26,4,0,
4);var a=new Sb(4,5,10);a.i=0;a.u=[e(4,5,10),e(28,5,10)];V.push(a);a=new Sb(4,6,18);a.i=0;a.u=[e(4,6,18),e(28,6,18)];V.push(a);f(T.g,16,4,2);V.push(new $b(2,7,26))},()=>{X(0,0,0,4,4,36);X(32,0,0,36,4,36);V.push(new jc(2,5,30,50));for(let a=6;30>=a;a+=4)Z(a,3,16,a,10,16).g[1]=2*a%11;Y(6,12,16,4,0,7);f(T.g,2,4,16);V.push(new $b(34,4,16))},()=>{const a=(b,c,d)=>{X(b,c,d,b+12,c+4,d+12);0===b&&0===d||V.push(new Wb(b+2,c+4,d+2));V.push(new Wb(b+10,c+4,d+2));V.push(new Wb(b+10,c+4,d+10));V.push(new Wb(b+
2,c+4,d+10));if(0<c){const g=new Sb(b+2,c+4,d+2);g.i=0;g.o=50;g.u=[e(b+2,c+4,d+2),e(b+10,c+4,d+2),e(b+10,c+4,d+10),e(b+2,c+4,d+10)];V.push(g)}};a(0,0,0);V.push(new jc(6,5,6,20));f(T.g,1,5,1);a(20,4,0);V.push(new jc(26,9,6,20));a(20,8,20);V.push(new jc(26,13,26,20));a(0,12,20);V.push(new $b(6,16,26))},()=>{X(0,0,0,32,4,32);X(0,4,0,32,8,4);X(0,4,28,32,12,32);X(0,4,4,4,10,28);X(28,4,4,32,8,28);f(T.g,30,8,2);for(let a=10;26>=a;a+=4){const b=new Sb(a,4,a);b.B=4279352304;b.i=12;b.o=50;b.u=[e(22,4,a),e(10,
4,a)];V.push(b)}Z(6,4,26,6,15,26);Y(6,5,10,0,4,4);Y(26,5,10,0,4,4);Y(10,13,30,4,0,4);V.push(new $b(30,12,30))},()=>{X(0,0,0,32,1,32);f(T.g,26,2,16);X(0,0,28,32,6,32);for(var a=0;10>a;a++)X(4,1,18+a,8,1+a/2,19+a);Z(2,5,26,2,5,6);Y(2,7,10,0,4,4);X(0,0,0,4,6,4);Z(26,5,2,6,5,2);Y(10,7,2,4,0,4);X(28,0,0,32,6,4);Z(30,5,26,30,5,6);Y(30,7,10,0,4,4);X(8,0,16,24,6,32);for(a=0;12>a;a++)X(23-a,1,16,24-a,6+a/2,20);X(8,1,16,12,12,20);X(8,1,20,20,12,32);V.push(new $b(14,12,26));a=[e(10,12,30),e(18,12,30),e(18,12,
22),e(10,12,22)];for(let b=0;4>b;b++){const c=new Sb(a[b][0],a[b][1],a[b][2]);c.i=0;c.u=a;c.H=b;V.push(c)}},()=>{X(0,0,0,32,4,32);for(var a=4;28>=a;a+=8)for(var b=4;28>=b;b+=8)V.push(new Wb(b,5,a));f(T.g,16,5,2);a=0;for(b=4;28>=b;b+=8)V.push(new sc(b,5,34,Math.PI,a+=.5));for(b=4;28>=b;b+=8){let c=-2,d=Math.PI/2;0!==(b-4)/8%2&&(c=34,d=-d);V.push(new sc(c,5,b,d,a+=.5))}V.push(new $b(16,4,16))},()=>{X(0,0,0,32,4,32);X(4,4,8,28,8,32);X(8,8,16,24,12,32);X(12,12,24,20,16,32);X(0,4,28,4,4.7,32);Z(2,4.5,
30,2,8,30);X(24,8,28,28,8.7,32);Z(26,8.5,30,26,12,30);X(8,12,28,12,12.7,32);Z(10,12.5,30,10,16,30);V.push(new sc(-2,9,10,Math.PI/2,.5));V.push(new sc(-2,9,14,Math.PI/2,.5));V.push(new sc(-2,13,18,Math.PI/2,1));V.push(new sc(-2,13,22,Math.PI/2,1));V.push(new sc(34,13,18,-Math.PI/2,1.5));V.push(new sc(34,13,22,-Math.PI/2,1.5));const a=new Sb(30,4,30);a.B=4279352304;a.i=12;a.o=80;a.u=[e(30,4,30),e(30,4,16)];V.push(a);Y(30,5,2,0,4,4);f(T.g,16,4,2);V.push(new $b(16,16,30))},()=>{f(T.g,16,4,2);X(0,0,0,
32,4,32);X(0,4,24,8,32,32);X(4,4,20,8,4.7,24);Z(6,4.5,22,6,15,22);Z(2,24,22,2,13.5,22);Z(6,22.5,22,6,33,22);Y(2,33,26,4,0,2);Y(2,33,30,4,0,2);X(24,4,24,32,32,32);Z(10,31.5,30,22,31.5,30);Z(22,31.5,26,10,31.5,26);Y(26,33,26,4,0,2);Y(26,33,30,4,0,2);X(24,4,0,32,32,8);Z(26,31.5,10,26,31.5,22);Z(30,31.5,22,30,31.5,10);Y(26,33,2,4,0,2);Y(26,33,6,4,0,2);V.push(new $b(28,32,4))},()=>{X(0,0,0,32,4,8);X(0,4,4,8,8,8);Z(30,3.5,10,30,11.5,10);for(let a=10;42>=a;a+=16)X(28,a,12,32,a+2,32),Y(30,a+3,18,0,4,3),V.push(new jc(30,
a+3,30,100)),X(0,a+8,12,4,a+10,32),Y(2,a+11,18,0,4,3),V.push(new jc(2,a+11,30,100));V.push(new $b(2,52,14));V.push(new lc);f(T.g,2,4,2)},()=>{S=Wc}],X=(a,b,c,d,g,l)=>{var k=new rc;f(k.g,(a+d)/2,(b+g)/2,(c+l)/2);f(k.i,(d-a)/2,(g-b)/2,(l-c)/2);V.push(k);for(a+=2;a<d;a+=4)for(b=c+2;b<l;b+=4)k=ta(K[0],4289366118),m(k,k,e(a,g+.01,b)),n(k,k,e(1.8,.02,1.8))},Z=(a,b,c,d,g,l)=>{const k=new rc;f(k.g,a,b,c);f(k.i,2,.3,2);k.u=[e(a,b,c),e(d,g,l)];V.push(k);return k},Y=(a,b,c,d,g,l)=>{for(let k=0;k<l;k++){const t=
new Wb;f(t.g,a,b,c);V.push(t);a+=d;c+=g}};function Vc(){K.forEach(b=>{var c;if(c=35044===b.usage)b.g=0,c=void 0;return c});V.length=0;f(T.g,16,4,16);f(T.h,0,0,0);T.J=!0;T.i=!1;T.l=1;T.o=0;T.s=3;T.D=0;Yb=Zb=Xb=T.S=0;V.push(T);fc();const a=ta(K[0],4278190080);n(a,a,e(500,500,500));(0,Xc[ec%Xc.length])();ac=V.filter(b=>b instanceof Wb).length;K.forEach(b=>35044===b.usage&&ua(b))};const Yc=e(0,0,0),Zc=e(0,0,0),$c=e(200,400,-32),ad=sa(1,2),bd=sa(21,1);K.push(new va(35044,ad,2E5),new va(35044,bd,1E3),new va(35048,ad,4E3),new va(35048,bd,2E3));const V=[],T=new kc;let Xb=0,ac=0,Zb=0,Yb=0,ec=0,cd=0;var dd=0,ed=1,Pc=2,Mc=3,Gb=4,ic=5,Wc=100;let S=dd;Vc();localStorage["OS13kMusic,Milky Way by Ben Prunty"]=JSON.stringify(Hc);
function Ib(){if(.02>Math.random()){var a=new mc;a.size=.08;a.h[1]=1;ba(a.g,T.g);a.g[0]+=30*(Math.random()-.5);a.g[2]+=30*(Math.random()-.5);V.push(a)}1<O-Zb&&(Yb=0);for(a=0;a<V.length;a++)V[a].C();a=0<T.l;for(var b=0;b<V.length;b++)for(var c=0;c<V.length;c++){if(V[b]instanceof rc&&!(V[c]instanceof rc)){var d=V[b],g=V[c],l=g.g[0];const t=g.g[1],u=g.g[2],z=g instanceof mc&&0<g.B;var k=z?.1:.7;const x=z?.1:2.5,D=d.g[0]-d.i[0]-k,H=d.g[1]-d.i[1],M=d.g[2]-d.i[2]-k,L=d.g[0]+d.i[0]+k,I=d.g[1]+d.i[1];k=d.g[2]+
d.i[2]+k;l>D&&l<L&&u>M&&u<k&&(z&&t<I&&t>H?g.l=0:t>I-1&&t<I?(g.g[1]=I,0>g.h[1]&&(g.h[1]=0,g.D=O,g.I=d)):t<I&&t+x>H&&(l<d.g[0]-d.i[0]?g.g[0]=D:l>d.g[0]+d.i[0]?g.g[0]=L:g.g[2]=u<d.g[2]-d.i[2]?M:k))}ba(G,T.g);G[1]+=1;V[b]instanceof kc&&V[c]instanceof mc&&V[c].B===nc&&1.5>ia(G,V[c].g)&&S===Gb&&(T.l=0,T.J=!1,V[c].l=0,Ob(...[.5,0,101,,,.5,4,2.8,,,,,,,.8,.4,,.95,,.42]),Tb(T.g,4293980400))}Vb(T);a&&0>=T.l&&Ub();Hb!==Rc&&1===q[27].m&&(Ba(),gc(Rc),Ec());if(Hb)if(S===Wc&&Hb!==Rc&&Hb!==Sc)Hb=null;else{if(S<=Pc||
Hb===Rc||Hb==Sc)Da("center"),B(24,"italic"),w("THE ADVENTURES OF",960,60),B(64,"italic"),w("CAPTAIN CALLISTO",960,120);if(Hb===Rc){Da("left");B(48,"italic");w("NEW GAME",250,400,0===W?"#fffe37":"#f0f0f0");w("CONTINUE",250,500,1===W?"#fffe37":"#f0f0f0");w("LEVELS",250,600,2===W?"#fffe37":"#f0f0f0");if(1===q[38].m||1===q[87].m)W=(W+2)%3,Ec();if(1===q[40].m||1===q[83].m)W=(W+1)%3,Ec();1===q[27].m&&(Ba(),gc(Uc),Ec());if(1===q[13].m||1===q[32].m||1===q[90].m)0===W&&(S=ed,ec=0,Vc(),gc(Qc),Ec()),1===W&&
(gc(null),Ec()),2===W&&(gc(Sc),Ec())}else if(Hb===Sc){B(32,"italic");for(a=0;10>a;a++)if(Da("left"),w(`LEVEL ${a+1}`,250,350+60*a,W===a?"#fffe37":"#f0f0f0"),b=dc[a+1])Da("right"),w(`${b.toFixed(1)} sec`,600,350+60*a,"#aaa");if(1===q[38].m||1===q[87].m)W=(W+9)%10,Ec();if(1===q[40].m||1===q[83].m)W=(W+1)%10,Ec();1===q[27].m&&(gc(Uc),Ec());if(1===q[13].m||1===q[32].m||1===q[90].m)S=Mc,ec=W+1,Nc(),Ec()}else.5<N-Tc&&1===za?Hb.G():S===dd?(Da("center"),B(32,"italic"),w("PRESS ANY KEY TO CONTINUE",960,990)):
S===ic?(Da("center"),B(64,"italic"),w(`LEVEL ${ec} CLEARED`,960,120),B(48,"italic"),w(O.toFixed(1)+" sec",960,220),B(32,"italic"),w("PRESS ANY KEY TO CONTINUE",960,990)):(v.fillStyle="#cb6",v.fillRect(20,900,900,160),v.strokeStyle="#000",v.lineWidth=3,v.strokeRect(20,900,900,160),a=S===Mc?ec:0,Da("left"),B(28,"italic"),Ca(Kc[S][a][0],30,915),Ca(Kc[S][a][1],30,958),B(20,"italic"),Ca("PRESS ANY KEY TO CONTINUE",30,1027))}else{T.F=!1;if(S!==ic&&S!==Wc){if(q[38].v||q[87].v)T.h[2]+=100*P,T.F=!0;if(q[40].v||
q[83].v)T.h[2]-=100*P,T.F=!0;if(q[37].v||q[65].v)T.h[0]-=100*P,T.F=!0;if(q[39].v||q[68].v)T.h[0]+=100*P,T.F=!0;(q[88].v||q[16].v)&&0<T.o?(T.h[1]+=60*P,T.i=!0,T.o=Math.max(0,T.o-20*P),fd()):T.i=!1;!T.i||Gc||Gc||(Gc=xc(Fc),Gc.loop=!0);!T.i&&Gc&&fc();T.D!==O||1!==q[90].K&&1!==q[32].K||Nb();1===q[82].m&&Ub();1===q[77].m&&(Jc?(Jc&&(Jc.stop(),Jc=null),localStorage["music-off"]="t"):(bc(Hc,!0),localStorage.removeItem("music-off")))}S===Wc?(Da("center"),B(24,"italic"),w("THE ADVENTURES OF",960,60),B(64,"italic"),
w("CAPTAIN CALLISTO",960,120),B(72,"italic"),Da("center"),w("THANK YOU FOR PLAYING",960,540)):(B(48),Da("left"),w("\u2b50 "+Xb+" / "+ac,20,20,"#fffe37"),w("\ud83d\ude80 "+T.o.toFixed(0)+"%",20,100),Da("right"),w(O.toFixed(1),1900,20,"#aaa"),B(24),Da("center"),E("W",1475,710),E("A",1430,755),E("S",1475,755),E("D",1520,755),E("\u2b06",1625,710),E("\u2b05",1580,755),E("\u2b07",1625,755),E("\u27a1",1670,755),E("SPACE",1593,810,100),E("Z",1670,810),E("SHIFT",1593,865,100),E("X",1670,865),E("R",1670,920),
E("M",1670,975),E("ESC",1658,1030,60),Da("left"),w("Move",1710,765,"#aaa"),w("Jump",1710,810,"#aaa"),w("Jetpack",1710,865,"#aaa"),w("Restart level",1710,920,"#aaa"),w("Toggle music",1710,975,"#aaa"),w("Main menu",1710,1030,"#aaa"))}S===Wc?(T.s=0,T.i=!0,ka(J.source,J.source,e(0,50,-15),.01),ka(T.g,T.g,e(0,80,0),.01),f(T.h,0,0,0),Ha(J,J.source,e(T.g[0],T.g[1]+15,T.g[2]),.4),fd()):S===ic?(T.s+=5*P,T.i=!0,ka(J.source,J.source,e(0,90,-25),.01),ka(T.g,T.g,e(0,80,0),.01),f(T.h,0,0,0),Yc[0]=T.g[0],Yc[1]=
T.g[1]+2,Yc[2]=T.g[2],Ha(J,J.source,Yc,.4),fd()):S===Mc||S===Gb?(Xa[0]=T.g[0]+8,Xa[1]=80,Xa[2]=T.g[2]-16,Yc[0]=8+.5*T.g[0],Yc[1]=.9*Yc[1]+.1*T.g[1],Yc[2]=4+.75*T.g[2],f(Zc,3.2+.8*Yc[0],Yc[1]+52,2+.75*Yc[2]-52),J.source[0]=Zc[0],ka(J.source,J.source,Zc,.02),Ha(J,J.source,Yc,.4)):S<=Pc&&(a=.2*N,b=.05*N,c=50+20*Math.sin(.2*N),f(J.source,c*Math.sin(b)*Math.sin(a),c*Math.abs(Math.cos(b)),c*Math.sin(b)*Math.cos(a)),f(Yc,0,0,0),Ha(J,J.source,Yc,.4),T.g[1]=400,T.h[1]=0,.08<N-cd&&(cd=N,a=new mc,b=new mc,a.size=
b.size=.25,a.i=b.i=4294901808,f(a.g,-6,.3,.7),f(a.h,-10,0,0),f(b.g,-6,.3,-.7),f(b.h,-10,0,0),V.push(a,b)));Ha(Xa,$c,e(16,0,16),.1);a=V;lb.fill(0);mb.fill(0);nb=0;for(c=a.length-1;0<=c;c--)d=a[c],d!==T&&0>=d.l?a.splice(c,1):d.J&&(b=d,l=Math.hypot(b.h[0],b.h[2]),g=b.M*Math.sin(20*N)*l,l*=.02,ba(G,b.g),b.D===O&&(G[1]+=g),ma(b.j),m(b.j,b.j,G),oa(b.j,b.j,b.s),na(b.j,b.j,l),d.A())}function Ub(){bc(Ic);fc();gc(Oc)}
function fd(){if(.3>Math.random()){const a=new mc;a.size=.2;a.h[1]=S===ic||S===Wc?-10:-.3;ba(a.g,T.g);a.g[0]-=.3*Math.sin(T.s);a.g[1]+=.8;a.g[2]-=.3*Math.cos(T.s);V.push(a)}}function Tb(a,b=4293980400,c=40){for(let d=0;d<c;d++){const g=new mc;ba(g.g,a);g.g[1]+=1;g.i=b;g.size=.4;const l=.2+5*Math.random(),k=6.28*Math.random();g.h[0]=Math.sin(k)*l;g.h[1]=2;g.h[2]=Math.cos(k)*l;g.O[1]=-.5;V.push(g)}}
function Vb(a){a.D===O&&a.I&&fa(a.g,a.g,a.I.h,P);a.h[0]*=1-8*P;a.h[2]*=1-8*P;a.g[0]+=P*a.h[0];a.g[2]+=P*a.h[2];var b=aa(a.h);.1<aa(a.h)?a.s=Math.atan2(a.h[0],a.h[2]):f(a.h,0,0,0);if(S===Wc){if(T.s=0,.5>Math.random()){const c=new qc;c.h[1]=-100-400*Math.random();V.push(c)}}else S!==ic&&(a.h[1]-=40*P,a.g[1]+=P*a.h[1]);a.D===O&&5<b&&.2>Math.random()&&(b=new mc,b.h[1]=.1,ba(b.g,a.g),V.push(b));-30>a.g[1]&&(a.g[1]=-30,a.l=0)}const gd=localStorage["callisto-times"],dc=gd?JSON.parse(gd):[];
